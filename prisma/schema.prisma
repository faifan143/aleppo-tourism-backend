generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Admin {
  id        Int            @id @default(autoincrement())
  name      String
  email     String         @unique
  password  String // For login purposes
  createdAt DateTime       @default(now())
  updatedAt DateTime       @updatedAt
  places    TourismPlace[] // One-to-many relation to TourismPlace

  @@map("admins")
}

model TourismPlace {
  id          Int      @id @default(autoincrement())
  name        String
  description String
  latitude    Float
  longitude   Float
  coverImage  String // URL of the main image
  adminId     Int // Foreign key to Admin
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  admin  Admin          @relation(fields: [adminId], references: [id]) // Relation to Admin
  photos TourismPhoto[] // One-to-many relation to TourismPhoto

  @@index([latitude, longitude]) // Index for geospatial queries
  @@map("tourism_places")
}

model TourismPhoto {
  id             Int      @id @default(autoincrement())
  url            String // URL of the photo
  tourismPlaceId Int // Foreign key to TourismPlace
  createdAt      DateTime @default(now())

  tourismPlace TourismPlace @relation(fields: [tourismPlaceId], references: [id], onDelete: Cascade) // Cascade delete

  @@map("tourism_photos")
}
